//
//  Metal4RenderApp.swift
//  Metal4Render
//
//  Created by gzonelee on 12/4/25.
//
//  Metal 4 삼각형 렌더링 데모 앱의 진입점
//
//  이 파일은 SwiftUI 앱의 메인 진입점을 정의합니다.
//  @main 속성이 적용된 구조체가 앱의 시작점이 됩니다.
//
//  ┌─────────────────────────────────────────────────────────────────────────┐
//  │                          앱 실행 흐름                                    │
//  ├─────────────────────────────────────────────────────────────────────────┤
//  │                                                                         │
//  │   시스템에서 앱 실행                                                     │
//  │         │                                                               │
//  │         ▼                                                               │
//  │   ┌─────────────────────┐                                               │
//  │   │  @main              │  ← 앱 진입점                                  │
//  │   │  Metal4RenderApp    │                                               │
//  │   └──────────┬──────────┘                                               │
//  │              │                                                          │
//  │              ▼                                                          │
//  │   ┌─────────────────────┐                                               │
//  │   │    WindowGroup      │  ← 윈도우 생성 및 관리                         │
//  │   └──────────┬──────────┘                                               │
//  │              │                                                          │
//  │              ▼                                                          │
//  │   ┌─────────────────────┐                                               │
//  │   │    ContentView      │  ← 메인 UI 뷰                                 │
//  │   └──────────┬──────────┘                                               │
//  │              │                                                          │
//  │              ▼                                                          │
//  │   ┌─────────────────────┐                                               │
//  │   │     MetalView       │  ← Metal 렌더링                               │
//  │   └─────────────────────┘                                               │
//  │                                                                         │
//  └─────────────────────────────────────────────────────────────────────────┘
//
//  Metal 4 소개 (WWDC 2025):
//  ─────────────────────────────────────────────────────────────────────────
//
//  Metal 4는 Apple의 차세대 GPU 프로그래밍 API로,
//  기존 Metal API 대비 다음과 같은 주요 개선사항을 제공합니다:
//
//  1. MTL4CommandQueue & MTL4CommandBuffer
//     - 커맨드 버퍼 재사용으로 메모리 효율성 향상
//     - CommandAllocator를 통한 메모리 풀링
//
//  2. MTL4ArgumentTable
//     - GPU 주소 기반의 유연한 리소스 바인딩
//     - 기존 setVertexBuffer() 대비 더 효율적
//
//  3. MTLResidencySet
//     - 명시적인 GPU 메모리 관리
//     - 더 세밀한 리소스 수명 제어
//
//  4. MTL4Compiler
//     - 새로운 파이프라인 컴파일 시스템
//     - 향상된 셰이더 최적화
//
//  지원 플랫폼:
//  ─────────────────────────────────────────────────────────────────────────
//  - macOS 26.0+
//  - iOS 26.0+
//  - iPadOS 26.0+
//  - tvOS 26.0+
//  - visionOS 26.0+
//
//  이전 버전에서는 LegacyMetalRenderer가 폴백으로 사용됩니다.
//

import SwiftUI

/// Metal 4 삼각형 렌더링 데모 앱
///
/// SwiftUI의 `App` 프로토콜을 구현하여 앱의 생명주기와
/// 메인 씬(Scene)을 정의합니다.
///
/// ## @main 속성
///
/// `@main` 속성은 이 구조체가 앱의 진입점임을 나타냅니다.
/// 시스템은 이 타입의 `main()` 메서드를 자동으로 호출합니다.
///
/// ## App 프로토콜
///
/// `App` 프로토콜은 다음을 요구합니다:
/// - `body: some Scene` - 앱의 컨텐츠와 동작을 정의하는 씬
///
/// ## 이 데모에서 렌더링하는 내용
///
/// ```
///            빨강 (Red)
///               ▲
///              ╱ ╲
///             ╱   ╲
///            ╱     ╲
///           ╱   ●   ╲  ← Y축을 중심으로 회전
///          ╱         ╲
///         ▼───────────▼
///    파랑 (Blue)   초록 (Green)
/// ```
///
/// - 왼손 좌표계 (Left-Hand Coordinate System)
/// - 원근 투영 (Perspective Projection)
/// - RGB 그라디언트 색상
/// - Y축 회전 애니메이션
@main
struct Metal4RenderApp: App {
    /// 앱의 메인 씬
    ///
    /// `WindowGroup`은 다음 기능을 제공합니다:
    /// - 플랫폼에 맞는 윈도우 자동 생성
    /// - macOS: 여러 윈도우 인스턴스 지원
    /// - iOS/iPadOS: 단일 윈도우 또는 멀티 윈도우 (iPadOS)
    /// - 상태 복원 및 윈도우 관리
    ///
    /// ## 씬(Scene) 타입들
    ///
    /// SwiftUI는 여러 씬 타입을 제공합니다:
    /// - `WindowGroup`: 일반적인 앱 윈도우
    /// - `Settings`: macOS 설정 윈도우
    /// - `DocumentGroup`: 문서 기반 앱
    /// - `MenuBarExtra`: macOS 메뉴 바 앱
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
        // ────────────────────────────────────────────────────────────────
        // WindowGroup 추가 설정 예시 (필요시)
        // ────────────────────────────────────────────────────────────────
        //
        // .windowStyle(.hiddenTitleBar)  // macOS: 타이틀 바 숨김
        // .windowResizability(.contentSize)  // 크기 조절 정책
        // .defaultSize(width: 800, height: 600)  // 기본 윈도우 크기
        //
    }
}
